     1                                  ; number printing algorithm
     2                                  [org 0x0100]
     3                                  
     4 00000000 E95D00                      jmp start
     5                                  
     6                                      clrscr:
     7 00000003 06                              push es
     8 00000004 50                              push ax
     9 00000005 57                              push di
    10                                  
    11 00000006 B800B8                          mov ax, 0xb800
    12 00000009 8EC0                            mov es, ax
    13 0000000B BF0000                          mov di, 0
    14                                  
    15                                      nextloc:
    16 0000000E 26C7052007                      mov word [es:di], 0x0720
    17 00000013 81C70200                        add di, 2
    18 00000017 81FFA00F                        cmp di, 4000
    19 0000001B 75F1                            jne nextloc
    20                                  
    21 0000001D 5F                              pop di
    22 0000001E 58                              pop ax
    23 0000001F 07                              pop es
    24 00000020 C3                              ret
    25                                  
    26                                  ; subroutine to print a number at top left of screen
    27                                  ; takes the number to be printed as its parameter
    28                                  
    29                                      printnum:
    30 00000021 55                              push bp 
    31 00000022 89E5                            mov bp, sp
    32 00000024 50                              push ax
    33 00000025 53                              push bx
    34 00000026 51                              push cx
    35 00000027 52                              push dx
    36 00000028 06                              push es
    37 00000029 57                              push di
    38                                  
    39 0000002A B800B8                          mov ax, 0xb800
    40 0000002D 8EC0                            mov es, ax
    41 0000002F 8B4604                          mov ax, [bp + 4]
    42 00000032 BB0800                          mov bx, 8
    43 00000035 B90000                          mov cx, 0
    44                                  
    45                                      nextdigit:
    46 00000038 BA0000                          mov dx, 0           ; zero upper half of dividend
    47 0000003B F7F3                            div bx
    48 0000003D 80C230                          add dl, 0x30        ; convert digit into ascii value
    49 00000040 52                              push dx
    50 00000041 41                              inc cx
    51 00000042 3D0000                          cmp ax, 0
    52 00000045 75F1                            jnz nextdigit
    53                                  
    54 00000047 BF0000                          mov di, 0
    55                                  
    56                                      nextpos:
    57 0000004A 5A                              pop dx
    58 0000004B B607                            mov dh, 0x07
    59 0000004D 268915                          mov [es:di], dx
    60 00000050 81C70200                        add di, 2
    61 00000054 E2F4                            loop nextpos
    62                                  
    63 00000056 5F                              pop di
    64 00000057 07                              pop es
    65 00000058 5A                              pop dx
    66 00000059 59                              pop cx
    67 0000005A 5B                              pop bx
    68 0000005B 58                              pop ax
    69 0000005C 5D                              pop bp
    70 0000005D C20200                          ret 2
    71                                  
    72                                      start:
    73 00000060 E8A0FF                          call clrscr
    74                                  
    75 00000063 B8B111                          mov ax, 4529
    76 00000066 50                              push ax
    77 00000067 E8B7FF                          call printnum
    78                                  
    79 0000006A B401                            mov ah, 0x01
    80 0000006C CD21                            int 21h
    81                                  
    82 0000006E B8004C                          mov ax, 0x4c00
    83 00000071 CD21                            int 0x21
